{% extends "client_content.html" %}

{% load blitz_tags %}

{% block morehead %} {{ super }}

{% if user.blitz and user.blitz.members %}
<script type='text/javascript' src='{{ STATIC_URL }}js/dashboard.js'></script>
{% endif %}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/dashboard.css">

<link rel="stylesheet" href="//code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.1/jquery-ui.js"></script>

<link rel='stylesheet' type='text/css' href='{{ STATIC_URL }}css/stylesheets/style.css' />
<link rel="stylesheet" type="text/css" media="screen" href="{{ STATIC_URL }}css/bootstrap-select.css">
{% endblock %}


{% block outer_content %}
{% block content %}


{% block header_content %}{{ super }}
    {% include "header_content.html" %}
    <div class="clearfix"></div>
{% endblock %}
<div class="colorstripe"></div>
<div id="dashboard">
	<div class="sidebar-left">
		<div class="inner">
			<div class="search-input">
				<input type='text' class="search-text" placeholder="Search for a client or program...">
			</div>
			<ul class='filters scopes'>
				<li class='item' data-scope='alerts'>
					<div class="item-inner">
						Alerts
					</div>
					{% if alerts_count %}
					<span class="results-count"><span class="inner">{{ alerts_count }}</span></span>
					{% endif %}
				</li>
				<li class="item active" data-scope='all'>
					<div class="item-inner">
						All Updates
					</div>
					{% if updates_count %}
					<span class="results-count"><span class="inner">{{ updates_count }}</span></span>
					{% endif %}
				</li>
				<div class="separator">
				</div>

				{% if blitzes %}
					{% for blitz in blitzes %}
	                    {% if not blitz.provisional and not blitz.recurring %}
						<li class='item blitz' data-object-pk="{{ blitz.pk }}" data-scope='blitz'>
							<div class="item-inner">
		  			            {{ blitz.title }}
							</div>
							{% if blitz.feeds_count %}
							<span class="results-count"><span class="inner">{{ blitz.feeds_count }}</span></span>
							{% endif %}
						</li>
	                    {% endif %}
					{% endfor %}

					<div class="separator">
					</div>
				{% endif %}

				{% for client in clients %}
				<li class='item solo-client' data-object-pk="{{ client.pk }}" data-scope='client'>
					<div class="item-inner">
		                {{ client.name }}
					</div>
					{% if client.feeds_count %}
					<span class="results-count"><span class="inner">{{ client.feeds_count }}</span></span>
					{% endif %}
				</li>
				{% endfor %}
			</ul>
			<div class="actions">
				<button type='button' class='obtn fullwidth' onclick="window.location='/blitz-setup'; return false;">+ Add Client/Group</button>
			</div>
		</div> <!-- inner -->
	</div> <!--/ sidebar-left -->

	<div class="content-wrapper">
		<div class="content row-fluid">
			<!-- Inbox Container -->
			<div class="inbox-container">
				<!-- Will be populated by AJAX -->
			</div>

			<div class="feeds">
				<!-- Blitz group header -->
				<div class="group">
					<!-- Will be populated by AJAX -->
				</div>

				{% if alerts %}
					<div class="alerts-wrapper hidden">
						{% include "trainer_alerts.html" %}
					</div>
				{% endif %}
				{% if user.blitz and user.blitz.members %}
					<div class="feeds-filter">
						<ul>
							<li class="active" data-scope-filter="all">Everything</li>
							<li data-scope-filter="workouts">Workouts</li>
							<li data-scope-filter="checkins">Check-Ins</li>
						</ul>
					</div>
		        	{% include "main_feed.html" %}
		        {% else %}
		        <b>Time to do something to get a program started...</b>

		        <form action="upload" method="get" name="upload" class="formpage-block-form">
		        {% csrf_token %}
		        <br>
    	        <div class="submit-container">
		            <button class='obtn obtn-half' type='submit'>Upload stuff</button>
		        </div>
		        </form>
		        {% endif %}
			</div> <!--/ feeds -->

			<!-- Summary -->
			<div id="summary">
			</div>

			<div class="clearfix"></div>
		</div>
	</div> <!--/ content -->

<!-- include spotter_program_edit_modal -->
{% include "spotter_program_edit_modal.html" with trainer=trainer workoutplan=workoutplan url_return='#' %}
<!-- include blitz_macros_modal -->
{% include "blitz_macros_modal.html" with trainer=trainer blitz=blitz url_return='#' %}

</div>

{% endblock content %}

{% endblock outer_content %}
